<link rel="import" href="../polymer/polymer-element.html">
<script src="./text-correction-parser.min.js"></script>

<dom-module id="text-correction-parser">
  <template>
    <style>
      :host {
        display: block;
      }
      #parsed {
        margin: 0;
      }

      #parsed > .added {
        color: var(--added-color, #1e88e5);
        @apply --added-mixins;
      }
      #parsed > .deleted,
      #parsed > .left-wrong-replaced,
      #parsed > .right-wrong-replaced {
        color: var(--deleted-color, rgba(211, 47, 47, .4));
        text-decoration: line-through;
      }

      #parsed > .left-right-replaced,
      #parsed > .right-right-replaced {
        color: var(--deleted-color, #1b5e20);
      }
    </style>

    <p id=parsed></p>
  </template>

  <script>
  class TextCorrectionParserElement extends Polymer.Element {

    static get is() { return 'text-correction-parser' }

    static get properties() { return {

      data: {
        type: String,
        observer: '_dataChanged'
      }
    }}

    constructor() {
      super();
      this.textCorrectionParser = new window.TextCorrectionParser();
    }

    _dataChanged() {
      this.$.parsed.innerHTML = this.textCorrectionParser.parse(this.data);
    }

  }
  window.customElements.define(TextCorrectionParserElement.is, TextCorrectionParserElement);
  </script>
</dom-module>